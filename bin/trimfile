# Last modified 2019-09-07
# Dorai Sitaram

trimfile1() {
  vi -es "$1" << "  EOF"
  
  "remove spaces at end of lines
  %s/\s\+$//

  "remove blank lines at beginning of file
  1 g/^$/ .,/./ j

  "remove blank lines at end of file
  $ g/^$/ ?.?,. j

  "consecutive blank lines in mid file reduced to one
  v/./ .,/./-1 j

  x
  EOF
}

for f in "$@"; do
  trimfile1 "$f"
done
