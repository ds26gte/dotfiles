# last modified 2018-10-01
# Dorai Sitaram

if test $# -ne 1
then echo $0 needs one argument file; exit
fi

col=65

f=$1
g=${f##*/}
basef=${g%.*}
ext=${g##*.}

ly='lynx -editor=vim -vikeys'

if test "$ext" = "html"
then COLUMNS=$col $ly $f

elif test "$ext" = "md"
then
  if test $basef.adoc -ot $f
  then pandoc -t asciidoc -o $basef.adoc $f
  fi
  if test $basef.html -ot $basef.adoc
  then kadoc $basef.adoc
  fi
  COLUMNS=$col $ly $basef.html

else
  if test $basef.html -ot $f
  then kadoc $f
  fi
  COLUMNS=$col $ly $basef.html
fi
