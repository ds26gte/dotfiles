# last modified 2018-09-25
# Dorai Sitaram

if test $# -ne 1
then echo $0 needs one argument file; exit
fi

col=65

f=$1
g=${f##*/}
basef=${g%.*}
ext=${g##*.}

ly='lynx -editor=vim -vikeys'

if test "$ext" = "html"
then COLUMNS=$col $ly $f

elif test "$ext" = "md"
then
  if test $basef.ad -ot $f
  then pandoc -t asciidoc -o $basef.ad $f
  fi
  if test $basef.html -ot $basef.ad
  then kadoc $basef.ad
  fi
  COLUMNS=$col $ly $basef.html

else
  if test $basef.html -ot $f
  then kadoc $f
  fi
  COLUMNS=$col $ly $basef.html
fi
